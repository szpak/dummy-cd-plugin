sudo: false
language: groovy
jdk:
  - oraclejdk8

before_install:
  - openssl aes-256-cbc -K $encrypted_21f09c8669c6_key -iv $encrypted_21f09c8669c6_iv
    -in gradle/gpg-key.asc.enc -d | gpg --fast-import
  - "export GRADLE_OPTS='-Dorg.gradle.daemon=true -Dorg.gradle.project.signing.keyId=0694F057 -Dorg.gradle.project.signing.secretKeyRingFile=$HOME/.gnupg/secring.gpg -Dorg.gradle.project.signing.password= -Dorg.gradle.project.gradle.publish.key=$PLUGIN_PORTAL_API_KEY -Dorg.gradle.project.gradle.publish.secret=$PLUGIN_PORTAL_API_SECRET'"
  - "export TRAVIS_COMMIT_MSG=$(git log --format=%B -n 1 $TRAVIS_COMMIT)"
  - git config user.email "szpak-ci@users.noreply.github.com"
  - git config user.name "Szpak CI Bot"

install: true
script:
 - ./gradlew prepareForCiBuild -s -i -Prelease.disableChecks && ./gradlew ciBuild -s -i -Prelease.disableChecks -Prelease.customUsername=SEC_TOKEN

before_cache:
  - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
  - rm -fr $HOME/.gradle/caches/*/plugin-resolution/
  - rm -fr $HOME/.gradle/caches/*/scripts/
  - rm -fr $HOME/.gradle/caches/*/scripts-remapped/
  - rm -fr $HOME/.gradle/caches/*/fileHashes/
  - rm -fr $HOME/.gradle/caches/transform-*/transform-*.lock
cache:
  directories:
    - $HOME/.gradle/caches/
    - $HOME/.gradle/wrapper/

env:
  global:
  - secure: B7aZZhlZKyCzep9e2eH91VBydAclEk3fGqnrCOI75QYA/8yg0UMXDXWc9bg+s92iWUEHhCS1PyCvofbWdnEJq4RyV9lMLnpFFbHfT9yaVzDS6cbI8VtQ2wCh7fhU479tWr5GvjTXdzEZm8Z/HL+GwPZvGZnNTreazvPmgqqaIXz+vQ2aC6grFMlMt8JwMSsEIaswaVZXJYVPGnpWiiBZRjoeUYlnUZ7Woz3DgIiHNmkKDxgZOPrxluwtJPhgTLizSavdq9EhIf5O5k2NTrnEvnHoh/g2XX67yZcGB4XmKwf19DNZqjrUY5AjSMSAhNcfndN3q5HSJvzGe8ujTd1QM2+GQXK7Ysmf+KmXnj0gdjyA5yqdB28+Y05Ze4koY8nef72x4lZpntFBjKXcWhF8DtoUnGZj+IHzs7peUQmhuQKYawXWkHVUfU+RQ6AieXkSPFRQqHaElnxCGnmg/KdZs/b+mkNiRtMH9oX7xVcxbBJ624KVijYt6oz3R2t2tuIhCRnFIiqPYFWiUv7hloiUXgluWs4Xd365UM4sLPGnNg572x9s6VurWTsoQ0SojGj46s3w0iLSjDR0YgKI6qIzXTUaKuZONtKUv7AJCaB1unJwOlGr6kNIP78g4KaOEN+tkVpOKWezGmE5oulqGoxbAjkksIbvYSIOG0w701udnvg=
  - secure: Y3wDcJYW3scNh+9IniJALOM8j+EVkpz2YoRlcczz7OvGDf0+OEdjysno6ARUvwuzPxckEHj/3emLjkrIiWMyi1Z3BQPP/8A3th3nkUpQni45J2+bp8IWG4ptsr83prK0MelszeZ4KeW7Birmo5POdIq78vAS7aRXfOBl3AWWnvKSALK7rcvp1mcU7TZvoH4WAameOLR8wDEvuWAgqXa94CYrPnM4yoXQajMQ1SAfZKUd3easz5sHJOKOJ/ia6KAVytCk6T3U0V/bKGQa1zsGpgN9m/vDK+T47B8j3j/Kkhwy9RS9M4lR91fcOEsvvDnZCrCRZsbf2NPfwExdntQe1bXoWaqEsgmRABfWOKTaQQnb3W4DejlZdrpus92HfaxCAigGwXKxWcrHzvb6oKb3WEDJfToXi90s1zwCsOmVph+OKYtmsd3RDmviAs5bzB9/TxcICyEOC34BO1Yd3sE2aI0qf+UVD0ZfQ7pVnN1HQVCFh/Y+CKnr+443zR0AC9d77RBDqRAY3KzYoTjwOjRtJGdhlBLjUJNQJ4UHBEmO4R3sjN9WqMAtp3/XxuQY2iFZJRjwCGroWlY/geG9SKTWf0g0lBnFy3fjzGtFVQ+WdNImtawDtSjZDILaR2PxRaB/NCllB+bPLj80Rf03gA2HxbJbwwGh3TE6pazcgr8wujU=
  - secure: anZn5uFR5lXyZocJOComeEdXiiZRovTlDkL7xeOt7X11/nL+LGU00y2RBgCuW6OnJfTNFoHGM3M3tqKpcqM/FDL7zGQFaj5WLsxrpePSFHP0U5Z42nFv7KRUA42w+6nCHwUX7K0pedJvG3HJduWzuYt1DaCSZrEqTd8XJC456p9h4tPew44y7apsDDb4tc5rzzVuXaCqc1L3dEVbJwhCU/EZ8cBfBwoh3u+0QFqTvM4fCXKwDG7EMAImOPHSGucrHs5UcH3dK0RXDhgq9bwxmxCOY5HlrY8pMe1QFDvGSCHE5rTDQDlRZwG4WED2Xq8SuRXW8pHycdFNpKHCjaNnGXLToU7TYsiZo/d/6wf/BXybSF4Ym9lNT+UCgPPfjlLFgZxLqS1IyEjVvqp588o80jLUs/VWe1ioLXhpWhSe59ulYgDqgdTaCLclTtn6SNijgzBm50uPg3Ul1PVxLG//vCTOnIVuF44mNsoeWUdAKFaqceudlCELfCkB8IM+9WmlBfpxxPyDonzOWezyhpuCrWnz5wBxBKOBrIw7vhqE3z/UZ3HTgW2Ubo8tdRg0wJEIImp/7dpuLsAOA1izVVunv1NIXDf8Hwp0ff17ghBeI+cKUm10p6/vPO+lD2vxjImgVhrUqSaswM25tprM/cCzaJY+y10zCzh499JGcwojbh0=
  - secure: RGLw3GRoBez6V6yu9ICEOXgwliFXMo2UqTNP9QRhrWgOuiveRB5P9v0FIyuXXv0P/eP+hi1ptvCb5kd8/OgDRqQVmxmBZ8KDWcYSKvCUaZMK+lwZwKz9eXAy0fbWgo/rFpOB0TZuE7wjxzpn8ZbevAxcS/++mC8K41tQHBounzubqT72YRzuwqpUaEOzVt8eIH/HUCKAwYGKqAbxs2tMai/FbIBWayTc57/t62efhzl3Fpt0LiUBcZ4RC4K9udI55A6Lnnn6JIn8TzwmhOIZLGfGdDs4NqsH71pk2SebQYzN7Xz2mUEQxWIduaQtxmiaML2ICaFxBncFdnMamzgOEf7DXHIj1o9h5lDRknEg71hrIr5L1KgRaZf41QO8mVciljLQ23xTSNnpgoy+/kbg+cmzwXRbUW8yImDHI8uEYQW08JOT6LR2edpMRUAORCK/vzyWfzxr27Pb9QNnYWjUyOYv/rmPRaFfYR96PTpS9f67P9IUzyEyM13kN+YOt8bj+aQjj6D6uSMVDWXWgEOX8hNxRGEse1ACY8Xn18vzISHbOq615AMdpWTF22eAVMMfnVGldCb4eOCG+NItwVikpt62Pmlbb3rNBHr1NNXaXAlbSrdgdZzA7qklLmsfgSMknucTOCaPb7zpFjCNlSqO4/tTw5dT2Uwu+XFn7OEZrZA=
  - secure: VAR2rzOpzpI1LmWA3r4ra9kyMoYc3IG7+Wn4Rv4AnHNevkccrN6/hfbJCnS0SxTCTEK4V15o6d8oCBZ1+EVLZjyYkTuTUFmmvBWToA6nR6IdfHwgweZxeCXCAEtdbQcptglglxx1Erj8bqy2IlG+hs81rmloI/2KBIx91cdHOsfznDpOmRApZVbQOkPzIf7MC2nF2zIIHaPVrFnc9KTdrL3N9E9YCw4oTvTM0yJa0LnGi8FUYx/czuFTner2tO4jQkFbkGdKiMW0uv9wo9yZ1u5gJRuw4MnwYRacGYovx6uk5fYqNKEu2n0Ije4vnoOKfhuB/EWuCE+p1VgtnAbey5lEPbT/ws9gURLDomt1dCHJs0gEPGs8C+j2c5FEYJ6/4s8hvw/oEQABhhpn2G+6LbyWMuSdoUERJKKTEP/gNdYu9m/nIswFCoqn//jz5fg3s7AytRVsFr7r40vykV9zRVmXE4aOjQYnnv06TWAVuHMzFKvnFLo14gMBwMm4brxl2fTsN6Ao2JDi8E9G8nk25mUUVt8NXVrnXYql8hbsl7QKSfSowhOQaThDq6FDFzSUIa7NnhAytihOdDEJJTR6YhB3b0F2ipJH/EbtUcTLOnaShTLvTCfuyIuvfGNBXjuYgXXZpZodM6eToJqu1YT2lCKbTLz0IuAmPXzfCccf5as=
